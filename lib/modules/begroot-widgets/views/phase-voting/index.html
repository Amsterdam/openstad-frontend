{% import 'phase-voting/ideas-list.html' as ideasList %}
{% import 'phase-voting/budgeting.html' as budgeting %}

{% set pageTitle    = 'Stemmen' %}
{% set contentClass = 'ideasList' %}
{% set activeMenu   = 'budget' %}

<div class="begroot-container">

	{{ budgeting.showBudgetWindow() }}

	<script>
	 var csrfToken = '{{csrfToken}}';
	 var userHasVoted = {{data.widget.userHasVoted}};
	 var userIsLoggedIn = {{data.widget.userIsLoggedIn}};
	 var authServerLogoutUrl = '{{authServerLogoutUrl}}';
	 var defaultSort = 	{% if config.budgeting.isActive %}'random'{% else %}'ranking'{% endif %}
	</script>

	{% include 'phase-voting/includes/end-date-bar.html' %}

	<div id="ideasList" class="pageContent {{contentClass}}">
		{% if data.ideas.length > 0 %}
		<div class="row">
			<div class="col-xs-12 col-sm-8">
				{% if data.global.areas and data.global.areas.length > 0 %}
				<div class="tab-selector">
					<ul>
						<li><a id="themaSelector0" href="javascript: void deactivateAll()">Alle plannen</a></li>
					</ul>
					<select id="filterSelector" class="default-select" onchange="activateFilter(this.selectedIndex)">
						<option value="0">Alle gebieden</option>
						{% for area in data.global.areas %}
						<option value="{{area.value}}">{{area.value}}</option>
						{% endfor %}
					</select>
					<a class="no-button inactive" href="javascript: void deactivateAll()">Wissen</a>
				</div>
				{% endif %}
			</div>
			<div class="col-xs-12 col-sm-4">
				<div class="sort">
					<select class="default-select">
						<option {{'selected' if not sort or data.query.sort == 'createdate_desc'}} value="createdate_desc">Nieuwste eerst</option>
						<option {{'selected' if data.query.sort == 'createdate_asc'}} value="createdate_asc">Oudste eerst</option>
						<!-- <option {{'selected' if sort == 'ranking'}} value="ranking">Ranglijst</option>  -->
					</select>
				</div>
			</div>
		</div>
		{% endif %}

		<br />

		{{ ideasList.showIdeasList(data.ideas, fullHost, user, userHasVoted, isAdmin) }}
	</div>
</div>
