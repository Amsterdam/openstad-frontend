{% set pageTitle = 'Jouw plan insturen' %}
{% set showForm = true %}
{% set idea = data.idea %}
{% set isOwner = data.openstadUser.id === idea.userId %}
{% set isReactedTo = (idea.yes > 0 or idea.no > 0 or idea.argumentCount > 0) %}
{% set notReactedTo =  not isReactedTo %}
{% set isOwnerOrAdmin = (notReactedTo or not data.widget.hideAdminAfterPublicAction and isOwner) or data.isAdmin %}


{% if idea and isOwnerOrAdmin %}
{% set showForm = true %}
{% elseif (not idea) and data.openstadUser and data.openstadUser.id %}
{% set showForm = true %}
{% else %}
{% set showForm = false %}
{% endif %}

{% if data.widget.editorDescription %}
{% set useModernEditor = true %}
{% else %}
{% set useModernEditor = false %}
{% endif %}

<div class="pageContent newIdea" id="content">
	{% if not showForm %}
	<div class="box-grey">
		<h1>Om een plan in te dienen moet je ingelogd zijn.</h1>
		<p>Klik <a href="/oauth/login">hier</a> om in te loggen.</p>
	</div>
	{% elseif showForm %}
		<div  id="formulier-block">
			{% if data.widget.formType === 'dynamic' %}
			{% include 'includes/dynamic-form.html' %}
			{% else %}
			{% include 'includes/static-form.html' %}
			{% endif %}
		</div>
	 {% endif %}
</div>
<script>
	var titleMinLength = parseInt('{{data.widget.siteConfig.ideas.titleMinLength}}');
  var titleMaxLength = parseInt('{{data.widget.siteConfig.ideas.titleMaxLength}}');
  var summaryMinLength = parseInt('{{data.widget.siteConfig.ideas.summaryMinLength}}');
  var summaryMaxLength = parseInt('{{data.widget.siteConfig.ideas.summaryMaxLength}}');
  var descriptionMinLength = parseInt('{{data.widget.siteConfig.ideas.descriptionMinLength}}');
  var descriptionMaxLength = parseInt('{{data.widget.siteConfig.ideas.descriptionMaxLength}}');
</script>
<script src="/js/vendor/trix.js"></script>
<script src="/js/vendor/filepond.js"></script>
<script src="https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.js"></script>
