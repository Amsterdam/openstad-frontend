{% set pageTitle = 'Jouw plan insturen' %}
{% set contentClass = 'newIdea' %}
{% set useModernEditor = true %}
{% set showForm = true %}
{% import 'includes/openstad-map.html' as openStadMap %}
{% set summaryMaxLength = 140 %}

<div class="pageContent newIdea" id="content">
	{% if showForm %}
		<div  id="formulier-block">
			<form method="post" id="js-form" action="/modules/idea-form-widgets/submit">
				<div id="titleAndSummary">
					<h4>Naam</h4>
					<p>
						{{data.user.firstName}} <em>(je emailadres wordt nooit gepubliceerd)</em>
					</p>

					<h2>Titel plan</h2>
					<input type="text" name="title" value="{{idea.title}}" required><br />
					<input type="hidden" id="extraData" name="extraData" value=""><br />

					{% if data.widget.area %}
					<h2>Gebied</h2>
					<div class="form-info">Selecteer het gebied waarop jouw plan betrekking heeft. Gaat het niet over een specifiek gebied? Kies dan voor West Algemeen.</div>
					<select id="gebied" value="{% if idea.extraData %}{{idea.extraData.gebied}}{% endif %}">
						<option value="">Kies gebied</option>
						<option value="Bos en Lommer" {% if (idea.extraData) and (idea.extraData.gebied == "Bos en Lommer") %}selected{% endif %}>Bos en Lommer</option>
						<option value="De Baarsjes" {% if (idea.extraData) and (idea.extraData.gebied == "De Baarsjes") %}selected{% endif %}>De Baarsjes</option>
						<option value="Oud-West" {% if (idea.extraData) and (idea.extraData.gebied == "Oud-West") %}selected{% endif %}>Oud-West</option>
						<option value="Westerpark" {% if (idea.extraData) and (idea.extraData.gebied == "Westerpark") %}selected{% endif %}>Westerpark</option>
						<option value="West Algemeen" {% if (idea.extraData) and (idea.extraData.gebied == "West Algemeen") %}selected{% endif %}>West Algemeen</option>
					</select>
					<br />
					{% endif %}

					{% if data.widget.theme %}
					<h2>Thema</h2>
					<select id="thema" value="{% if idea.extraData %}{{idea.extraData.thema}}{% endif %}">
						<option value="">Kies thema</option>
						<option value="Groen" {% if (idea.extraData) and (idea.extraData.thema == "Groen") %}selected{% endif %}>Groen en Openbare ruimte</option>
						<option value="Diversiteit & Inclusiviteit" {% if (idea.extraData) and (idea.extraData.thema == "Diversiteit & Inclusiviteit") %}selected{% endif %}>Diversiteit en Inclusiviteit</option>
						<option value="Duurzaam" {% if (idea.extraData) and (idea.extraData.thema == "Duurzaam") %}selected{% endif %}>Duurzaam</option>
					</select>
					<br />
					{% endif %}

					<h2>Samenvatting</h2>
					Vertel in maximaal {{summaryMaxLength}} tekens iets meer over je plan.<br>
					<textarea name="summary" required maxlength="{{summaryMaxLength}}">{{idea.summary}}</textarea>
					<div id="charsLeft">Je hebt nog <span>{{summaryMaxLength}}</span> tekens over.</div>

				</div>

				<div id="imageUpload">
					<h2>Plaatjes</h2>
					<input type="file" class="imageUploader filepond" multiple />
					<input type="hidden" name="validateImages" multiple />
				</div>

				<div id="description">
					<h2>Beschrijving</h2>
					<div class="form-info">
						Gebruik de ruimte hieronder om je voorstel verder uit te leggen.
					{#	<ul>
							<li>Wat is het verhaal achter jouw plan?</li>
							<li>Waarom past dit plan goed bij het thema dat je geselecteerd hebt?</li>
							<li>Is het een plan dat je zelf wilt uitvoeren, of moet het door een organisatie of de gemeente uitgevoerd worden?</li>
							<li>Wat wil je ermee bereiken?</li>
							<li>Draag argumenten aan om mensen uit West te overtuigen op jouw plan te stemmen. Je plan heeft minimaal 50 stemmen nodig om door te gaan naar de volgende fase.</li>
						</ul>
						#}
					</div>

						<trix-toolbar id="trixToolbar">
							<div class="button_row">
								<span class="button_group text_tools">
									<button type="button" class="icon heading-1" data-trix-attribute="heading1" title="Titel">Heading</button>
									<button type="button" class="icon bold" data-trix-attribute="bold" data-trix-key="b" title="Vetgedrukt">Bold</button>
									<button type="button" class="icon italic" data-trix-attribute="italic" data-trix-key="i" title="Cursief">Italic</button>
									{# <button type="button" class="icon strike" data-trix-attribute="strike" title="Doorstrepen">Strikethrough</button> #}
									<button type="button" class="icon link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="Link">Link</button>
								</span>

								<span class="button_group text_tools">
									{# <button type="button" class="icon quote" data-trix-attribute="quote" title="Quote">Quote</button>
									<button type="button" class="icon code" data-trix-attribute="code" title="Code">Code</button> #}
									<button type="button" class="icon list bullets" data-trix-attribute="bullet" title="Opsomming">Bullets</button>
									<button type="button" class="icon list numbers" data-trix-attribute="number" title="Genummerde lijst">Numbers</button>
									<button type="button" class="icon nesting-level decrease" data-trix-action="decreaseNestingLevel" title="Inspringen vergroten" disabled="">Decrease Level</button>
									<button type="button" class="icon nesting-level increase" data-trix-action="increaseNestingLevel" title="Inspringen verkleinen" disabled="">Increase Level</button>
								</span>

								{# <span class="button_group history_tools">
								<button type="button" class="icon undo" data-trix-action="undo" data-trix-key="z" title="Undo" disabled="">Undo</button>
								<button type="button" class="icon redo" data-trix-action="redo" data-trix-key="shift+z" title="Redo" disabled="">Redo</button>
								</span> #}
							</div>

							<div class="dialogs">
								<div class="dialog link_dialog" data-trix-attribute="href" data-trix-dialog="href">
									<div class="link_url_fields">
										<input type="url" required="" name="href" placeholder="Enter a URLâ€¦">
										<div class="button_group">
											<input type="button" value="Link" data-trix-method="setAttribute">
											<input type="button" value="Unlink" data-trix-method="removeAttribute">
										</div>
									</div>
								</div>
							</div>
						</trix-toolbar>
						<trix-editor id="js-editor" class="userContentEditor" input="js-description" toolbar="trixToolbar"></trix-editor><br>

					<!--
							<div id="charsLeftMain">Nog minimaal <span>140</span> tekens.</div><br/><br/>
							!-->

						<input
							type="hidden"
							id="js-description"
							name="description"
							value="{{idea.description}}"
							required
							minlength="140"
						/>

						<input type="hidden" name="redirect" value="{{data.widget.redirect}}">

					{% if idea.id %}
						<input type="hidden" name="id" value="{{idea.id}}">
						<input type="hidden" name="_method" value="PUT">
					{% endif %}
					<input type="hidden" name="_csrf" value="{{csrfToken}}">
				</div>

				<div id="location">
					<h2>Locatie</h2>
					<div class="form-info" style="height: auto;">Heeft jouw plan betrekking op een specifieke plek? Klik dan op de juiste locatie in de kaart om een vlaggetje te plaatsen. Verwijder het vlaggetje door hem nogmaals aan te klikken.</div>
					<div id="mapcontainer">
						{{openStadMap.map(googleKey = config.openStadMap.googleKey, editorInputElementId = 'locationField')}}
					</div>

					<input type="hidden" id="locationField" name="location" required value='{{idea.location | dump | safe}}'>

				</div>


				<input type="submit" value="Plan opslaan">
			</form>
		</div>

		<div class="secondary">
			<div class="pageContent">
			</div>
		</div>
	{% endif %}
</div>
<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js"></script>
