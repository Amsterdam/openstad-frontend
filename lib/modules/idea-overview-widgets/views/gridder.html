
      <script>
    	 var imageUrl = {};

    	 function doShowImage(ideaId, target) {
    		 var div = target.querySelector('div.image');
    		 if (div) {
    			 div.style.height = target.offsetWidth + 'px';
    			 var img = div.querySelector('div.image-upload');
    			 img.style.backgroundImage = "url('" + imageUrl[ideaId] + "')";
    /*
    			 var factor = target.offsetWidth / 300;
    			 img.style.top    = Math.round( 23 * factor ) + 'px';
    			 img.style.left   = Math.round( 46 * factor ) + 'px';
    			 img.style.width  = Math.round( 210 * factor ) + 'px';
    			 img.style.height = Math.round( 263 * factor ) + 'px';
    			 img.style.backgroundSize = Math.round( ( imageData[ideaId].width / 415 ) * 210 * factor ) + 'px ' + Math.round( ( imageData[ideaId].height / 520 ) * 263 * factor ) + 'px';
    		//	 img.style.backgroundPosition = Math.round( ( imageData[ideaId].left / 415 ) * 210 * factor ) + 'px ' + Math.round( ( imageData[ideaId].top / 520 ) * 263 * factor ) + 'px';
    */
    				img.style.top    = '0px';
    				img.style.left   = '0px';
    				img.style.width  = '100%';
    				img.style.height = '100%';
    				img.style.backgroundSize = 'cover';
    		 }
    	 }

    	 var isPhone = document.querySelector('body').offsetWidth < 700; // isPhone - todo: betere afvanging

    	</script>

    	<ul id="ideaList" class="gridder" onclic="handleClick(event);">
    		<!-- You can load specify which content is loaded by specifying the #ID of the div where the content is  -->
    		{% for idea in data.ideas %}<li id="idea-{{idea.id}}" class="gridder-list" data-griddercontent="#ideaContent{{idea.id}}" onmouseover="this.querySelector('.gridder-mouse-over').style.display = 'block';" onmouseout="this.querySelector('.gridder-mouse-over').style.display = 'none';">
    			<div class="image-container" style="position: relative;">
    				<div class="image">
    					{# <img src="/img/eberhardvanderlaan2/image-background.jpg" class="image-background"/> #}
    					<div class="image-upload"></div>
    					{# <img src="/img/eberhardvanderlaan2/image-foreground.png" class="image-foreground"/> #}
    				</div>
    				<div class="gridder-mouse-over">
    					<div class="background">
    					</div>
    					<div class="one-button button-more-info{% if userHasVoted %} centered{% endif %}">
    						Bekijk dit ontwerp
    					</div>
    				</div>
    			</div>
    			<div class="info">
    				<h3>{{idea.title}}</h3>
    			</div>
    			<script>
    				{#
    			 {% if (idea.posterImage) and (idea.posterImage.extraData) %}
    			 imageUrl[{{idea.id}}] = "{{idea.posterImageUrl}}";
    			 // doShowImage({{idea.id}}, document.querySelector('#idea-{{idea.id}}'))
    			 {% endif %}
    			 #}
    			 {% if (idea.imageUrl) %}
    			 imageUrl[{{idea.id}}] = "{{idea.imageUrl}}";
    			 // doShowImage({{idea.id}}, document.querySelector('#idea-{{idea.id}}'))
    			 {% endif %}

           {% if (idea.extraData) and (idea.extraData.images) %}
           imageUrl[{{idea.id}}] = "{{idea.extraData.images[0]}}";
            doShowImage({{idea.id}}, document.querySelector('#idea-{{idea.id}}'))
           {% endif %}
    			</script>
    		</li>{% endfor %}
    	</ul>

    	{% for idea in data.ideas %}
    		<div id="ideaContent{{idea.id}}" class="gridder-content">
    			<div class="thisIdeaId">{{idea.id}}</div>
    			<h3 class="phone">{{idea.title}}</h3>
    			<div class="image-and-vote-button-container">
    				<div class="image-mask">
    					<div class="image-container">
    						<div class="image" style="/*cursor: url('/img/vergrootglas.png'), pointer;*/">
    							{#<img src="/img/eberhardvanderlaan2/image-background.jpg" class="image-background"/>#}
    							{#<div class="image-upload"></div>#}
    							{#<img src="/img/eberhardvanderlaan2/image-foreground.png" class="image-foreground" onmouseover="if (!isPhone) document.getElementById('mask-{{idea.id}}').style.display = 'block'"/> #}
    							<!--<div
                    id="mask-{{idea.id}}"
                    style="position: absolute; width: 100%; height: 100%; background-color: black; opacity: 0.4; z-index: 30; display: none; cursor: url('/img/vergrootglas.png'), pointer;"
                    onmouseout="document.getElementById('mask-{{idea.id}}').style.display = 'none'"
                    onclickBKP="showLightbox({{idea.id}})"

                  ></div> !-->
                    <div class="fotorama"

            				data-nav="thumbs"
            				data-allowfullscreen="true"
            				data-ratio="400/300"
            				data-fit="cover"
            				data-thumbwidth="105"
            				data-thumbheight="105"
            				data-auto="true"
            				>
                    {% if (idea.extraData) and (idea.extraData.images) %}
                    {% for image in idea.extraData.images %}
                    <a href="{{image}}"></a>
                    {% endfor %}
                    {% endif %}
            				</div>
    						</div>
    					</div>
    				</div>
    			</div>
    			<div class="content">
    				<h3 class="desktop">{{idea.title}}</h3>
    				<div class="summary">{{idea.summary}}</div>
    				<div class="description">{{idea.description | safe | nlbr}}</div>


    				{% if data.openstadUser.id === idea.userId %}
    					<div class="description"><a href="/indienen?ideaId={{idea.id}}" target="_blank">Bewerk dit plan</a></div>
    				{% endif %}

    				<div class="share-spacer"></div>
    				<div class="share-buttons">
    					<div class="text">Deel dit ontwerp:</div>
    					<ul class="share">
    						<li><a class="facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u={{req}}/stemmen?showIdea={{idea.id}}">Facebook</a></li>
    						<li><a class="twitter"  target="_blank" href="https://twitter.com/home?status={{fullHost}}/stemmen?showIdea={{idea.id}}">Twitter</a></li>
    						<li><a class="email"    target="_blank" href="mailto:?subject={{'Zorg goed voor onze stad ontwerp: '+idea.title | urlencode}}&body={{fullHost | urlencode}}/stemmen?showIdea={{idea.id}}">Email</a></li>
    					</ul>
    				</div>
    			</div>
    		</div>
    	{% endfor %}
