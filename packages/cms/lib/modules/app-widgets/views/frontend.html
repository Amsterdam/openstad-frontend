<script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
<script src="/modules/app-widgets/js/app.frontend.js?v={{data.assetsGeneration}}"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<div id="{{data.widget.containerId}}" class="osc-component" style="width:100%; height:100%">
    <div id="admin-root" style="min-height: 400px; overflow: hidden"></div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        var settings = AppEditor.settings.{{data.widget.editorType if data.widget.editorType  else 'workout'}};

        var appProps = {
             appId: {{data.widget.appId if data.widget.appId else data.global.activeAppId}},
             jwt: '{{data.jwt}}',
             defaultResources: settings.defaultResources,
             apiBase: '/api/site/{{data.global.siteId}}',
             oAuthBase:  '/api-oauth/site/{{data.global.siteId}}',
             checkoutUrl: '{{data.siteUrl}}/cart/set',
             urlPrefix: '{{data.currentPath}}',
             startState: '{{data.widget.startState}}',
             loginUrl: '/oauth/login?returnTo={{data.currentPath}}',
             singleScreen: {{true if data.widget.singleScreen else false}},
             userId: {{ data.activeResource.id if data.activeResourceType === 'user' else false}},
             moderatorUser: {{data.openstadUser | json if data.hasModeratorRights else false}},
    };

        ReactDOM.render(React.createElement(AppEditor.FrontendApp, appProps), document.getElementById('admin-root'));
    });
</script>