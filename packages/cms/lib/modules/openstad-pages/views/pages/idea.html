{% extends "layout.html" %}

{% if data.userCan('add-sections') %}
{% set readOnly = false %}
{% else %}
{% set readOnly = true %}
{% endif %}

{% block main %}
{{ apos.area(data.page, 'body', {
    edit:  true,
    widgets: {
      'section': {
        addLabel: 'Add a section',
        pageType: data.page.type,
        activeResource: data.activeResource,
        activeResourceType: data.activeResourceType,
        siteConfig: {
          openStadMap: data.global.siteConfig.openStadMap,
          ideas: data.global.siteConfig.ideas,
          votes: data.global.siteConfig.votes
        },
        readOnly:  readOnly,
        edit: data.userCan('add-sections'),
        controls: {
          movable: data.userCan('add-sections'),
          removable: data.userCan('add-sections'),
          position: 'bottom-left'
        }
      },
      'icon-section': {
        addLabel: 'Add an icon section',
        readOnly: readOnly,
        pageType: data.page.type,
        activeResource: data.activeResource,
        siteConfig: {
          openStadMap: data.global.siteConfig.openStadMap,
          ideas: data.global.siteConfig.ideas,
          votes: data.global.siteConfig.votes
        },
        activeResourceType: data.activeResourceType,
        controls: {
          movable: data.userCan('add-sections'),
          removable: data.userCan('add-sections'),
          position: 'bottom-left'
        }
      }
    }
  })
}}
{% endblock %}
